import{r as n,a as l,j as i,F as O}from"./jsx-runtime-7cf68bf7.js";import{u as H,f as P,a8 as v,L as e,b3 as A,bc as h,M as u,C as d,b8 as M,aj as S,bd as C,be as p,S as f}from"./Phone-ec5c0d3e.js";const I=n.createContext(null);function T(){const[r,t]=n.useState([]),o=H(f.Unlocked),[s,a]=n.useState(null),[m,E]=n.useState(1);return n.useEffect(()=>{E(Math.floor(Math.random()*5)+1)},[o]),n.useEffect(()=>{P("Home",{action:"getHomes"}).then(c=>{c&&t(c)})},[]),l("div",{className:"home-container",style:{backgroundImage:`url(./assets/img/backgrounds/default/apps/home/${m}.png)`},children:[i(v.div,{animate:{backdropFilter:"blur(10px) brightness(0.75)"},exit:{backdropFilter:"inherit"},transition:{duration:1},className:"blur-overlay"}),i("div",{className:"home-header",children:s?l(O,{children:[i("div",{className:"title",children:e("APPS.HOME.MY_HOME")}),i(A,{className:"close",onClick:()=>a(null)})]}):i(O,{children:l("div",{className:"title",children:[i(h,{})," ",e("APPS.HOME.MY_HOMES")]})})}),i("div",{className:"home-wrapper",children:s?i(_,{data:s}):i("div",{className:"items",children:r.map((c,N)=>l("div",{className:"item small",onClick:()=>a(c),children:[i("div",{className:"icon blue",children:i(h,{})}),l("div",{className:"info",children:[i("div",{className:"title",children:c.label}),l("div",{className:"value",children:["#",c.id]})]})]},N))})})]})}const _=({data:r})=>{const[t,o]=n.useState(r),s=n.useRef(null);return l(O,{children:[l("div",{className:"title",children:[e("APPS.HOME.ACTIONS"),i(u,{})]}),l("div",{className:"category",children:[l("div",{className:"item",onClick:()=>{d.PopUp.set({title:e("APPS.HOME.WAYPOINT_POPUP.TITLE"),description:e("APPS.HOME.WAYPOINT_POPUP.TEXT").format({home:t.label}),buttons:[{title:e("APPS.HOME.WAYPOINT_POPUP.CANCEL")},{title:e("APPS.HOME.WAYPOINT_POPUP.PROCEED"),cb:()=>{P("Home",{action:"setWaypoint",id:t.id})}}]})},children:[i("div",{className:"icon blue",children:i(M,{})}),l("div",{className:"info",children:[i("div",{className:"title",children:e("APPS.HOME.LOCATION")}),i("div",{className:"value",children:e("APPS.HOME.SET_WAYPOINT")})]})]}),t.locked!==void 0&&l("div",{className:`item ${t.locked?"active":""}`,onClick:()=>{d.PopUp.set({title:e("APPS.HOME.LOCK_POPUP.TITLE").format({toggle:t.locked?e("APPS.HOME.UNLOCK"):e("APPS.HOME.LOCK")}),description:e("APPS.HOME.LOCK_POPUP.TEXT").format({toggle:(t.locked?e("APPS.HOME.UNLOCK"):e("APPS.HOME.LOCK")).toLowerCase()}),buttons:[{title:e("APPS.HOME.LOCK_POPUP.CANCEL")},{title:e("APPS.HOME.LOCK_POPUP.PROCEED"),cb:()=>{P("Home",{action:"toggleLocked",id:t.id,uniqueId:t.uniqueId}).then(a=>{a!==void 0&&o({...t,locked:a})})}}]})},children:[i("div",{className:"icon blue",children:i(S,{})}),l("div",{className:"info",children:[i("div",{className:"title",children:e("APPS.HOME.FRONT_DOOR")}),i("div",{className:"value",children:t.locked?e("APPS.HOME.LOCKED"):e("APPS.HOME.UNLOCKED")})]})]}),l("div",{className:"item",onClick:()=>{d.PopUp.set({title:e("APPS.HOME.GIVE_KEY_POPUP.TITLE"),description:e("APPS.HOME.GIVE_KEY_POPUP.TEXT"),input:{placeholder:"0",type:"text",minCharacters:1,onChange:a=>s.current=a},buttons:[{title:e("APPS.HOME.GIVE_KEY_POPUP.CANCEL")},{title:e("APPS.HOME.GIVE_KEY_POPUP.PROCEED"),cb:()=>{s&&P("Home",{action:"addKeyholder",id:t.id,source:s.current}).then(a=>{a&&(s.current=null,o({...t,keyholders:a}))})}}]})},children:[i("div",{className:"icon yellow",children:i(C,{})}),l("div",{className:"info",children:[i("div",{className:"title",children:e("APPS.HOME.GIVE_KEY")}),i("div",{className:"value",children:e("APPS.HOME.MANAGE")})]})]})]}),l("div",{className:"title",children:[e("APPS.HOME.KEY_ACCESS"),i(u,{})]}),i("div",{className:"category scroll",children:t.keyholders.map((a,m)=>l("div",{className:"item small full",onClick:()=>{d.PopUp.set({title:e("APPS.HOME.REMOVE_KEY_POPUP.TITLE"),description:e("APPS.HOME.REMOVE_KEY_POPUP.TEXT").format({name:a.name}),buttons:[{title:e("APPS.HOME.REMOVE_KEY_POPUP.CANCEL")},{title:e("APPS.HOME.REMOVE_KEY_POPUP.PROCEED"),cb:()=>{P("Home",{action:"removeKeyholder",id:t.id,identifier:a.identifier}).then(E=>{E&&o({...t,keyholders:t.keyholders.filter(c=>c!==a)})})}}]})},children:[i("div",{className:"icon blue",children:i(p,{})}),l("div",{className:"info",children:[i("div",{className:"title",children:a.name}),i("div",{className:"value",children:e("APPS.HOME.MANAGE")})]})]},m))})]})};export{I as HomeContext,T as default};
