import{r,a as n,F as E,j as t}from"./jsx-runtime-7cf68bf7.js";import{u as S,f as m,l as N,C,L as a,b as s,c as y,d as A,s as L,S as _}from"./Phone-ec5c0d3e.js";import{N as F}from"./Numpad-92ddfc65.js";import{C as $}from"./Check-676db25c.js";const d=L(0);function X(){const l=S(s.Settings),i=S(s.Setup.Stage),P=r.useRef(null),[u,p]=r.useState([]),[o,T]=r.useState([]),g=S(d),f=S(_.Visible),I=r.useRef(!1),[U,v]=r.useState("show");r.useEffect(()=>{m("getLocales").then(e=>{e&&T(e)})},[l]),r.useEffect(()=>{if(!o||o.length===0||i!==0||!f)return;let e=setInterval(()=>{v("hide"),setTimeout(()=>{let c=b(d.value);d.set(c),d.value},1500),setTimeout(()=>{v("show")},1520)},4e3);return()=>{clearInterval(e)}},[o,i,f]),r.useEffect(()=>{var e;N(((e=o[g])==null?void 0:e.locale)??"en")},[g]);const b=e=>o[e+1]?e+1:0,k=e=>{if(e=="backspace")p(c=>c.slice(0,-1));else{const c=[...u,e];p([...u,e]),c.length>3&&(s.Setup.Stage.set(s.Setup.Stage.value+1),m("Security",{action:"setPin",pin:c.join("")}).then(h=>{h&&s.Settings.patch({security:{...s.Settings.value.security,pinCode:!0}})}))}};return r.useEffect(()=>{i===0||i===5?C.IndicatorVisible.set(!0):C.IndicatorVisible.set(!1)},[i]),n("div",{className:`setupContainer ${U}`,children:[i===0&&n(E,{children:[t("div",{className:"titleContainer",children:a("SETUP.HELLO")}),t("div",{className:"footer",children:a("SETUP.NEXT")})]}),i===1&&n("div",{className:"chooseLanguage",children:[t("i",{className:"far fa-globe globe"}),t("div",{className:"languages",children:o.map(e=>n("div",{className:"item",onClick:()=>{s.Setup.Stage.set(s.Setup.Stage.value+1),I.current=!0,s.Settings.patch({locale:e.locale});let c=o.findIndex(h=>h.locale===e.locale);N(e.locale).then(()=>{d.set(c)})},children:[t("div",{className:"label",children:e.name}),t("i",{className:"fas fa-chevron-right"})]},e.locale))})]}),i===2&&n("div",{className:"passcode slideIn",children:[t("i",{className:"fas fa-lock lock"}),t("div",{className:"title",children:a("SETUP.CREATE_PASSCODE")}),t("div",{className:"subtitle",children:a("SETUP.CREATE_PASSCODE_TEXT")}),t(y,{pin:u,Ref:P,dark:!0}),t("div",{className:"highlight",onClick:()=>{s.Setup.Stage.set(s.Setup.Stage.value+2),s.Settings.patch({security:{...s.Settings.value.security,pinCode:!1}})},children:a("SETUP.SKIP")}),t("div",{className:"buttons",children:t(F,{cb:k})})]}),i===3&&n("div",{className:"faceId slideIn",children:[t("img",{className:"faceid",src:"./assets/img/icons/FaceId.png"}),t("div",{className:"title",children:a("SETUP.FACE_ID_SETUP")}),t("div",{className:"subtitle",children:a("SETUP.FACE_ID_TEXT")}),t("div",{className:"button",onClick:()=>{m("Security",{action:"setFaceId",pin:u.join("")}).then(e=>{e&&(s.Settings.patch({security:{...s.Settings.value.security,faceId:!0}}),s.Setup.Stage.set(s.Setup.Stage.value+1))})},children:a("SETUP.ENABLE_FACE_ID")}),t("div",{className:"highlight",onClick:()=>{s.Setup.Stage.set(s.Setup.Stage.value+1),s.Settings.patch({security:{...s.Settings.value.security,faceId:!1}})},children:a("SETUP.SKIP")})]}),i===4&&n("div",{className:"appearance slideIn",children:[t("div",{className:"title",children:a("SETUP.APPEARANCE")}),t("div",{className:"subtitle",children:a("SETUP.APPEARANCE_TEXT")}),t("div",{className:"modes",children:["light","dark"].map((e,c)=>n("div",{className:"mode",onClick:()=>{s.Settings.patch({display:{...s.Settings.value.display,theme:e}})},children:[t("img",{src:`./assets/img/${e}-mode-placeholder.png`,alt:"Theme"}),t("div",{className:"mode-text",children:A(e)}),t($,{checked:l.display.theme===e})]},c))}),t("div",{className:"button",onClick:()=>s.Setup.Stage.set(s.Setup.Stage.value+1),children:a("SETUP.CONTINUE")})]}),i===5&&n(E,{children:[n("div",{className:"titleContainer small",children:[a("SETUP.WELCOME_TO")," ",t(x,{})]}),t("div",{className:"footer",children:a("SETUP.CLICK")})]})]})}const x=()=>{const l="abcdefghijklmnopqrstuvwxyz".split("");return`${l[11].toUpperCase()}${l[1].toUpperCase()} ${l[15].toUpperCase()}${l[7]}${l[14]}${l[13]}${l[4]}`};export{X as default};
